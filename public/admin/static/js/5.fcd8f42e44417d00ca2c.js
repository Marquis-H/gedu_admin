webpackJsonp([5],{1041:function(t,n,e){var a=e(1042);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,e(24).default)("14029f5f",a,!0,{})},1042:function(t,n,e){(t.exports=e(19)(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},1043:function(t,n,e){"use strict";n.c=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return a.a.get("/v1/prize/list",t)},n.a=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return a.a.post("/v1/prize/create",t)},n.d=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return a.a.post("/v1/prize/update",t)},n.b=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return a.a.post("/v1/prize/delete",t)};var a=e(30)},1044:function(t,n,e){"use strict";e.d(n,"a",function(){return a}),e.d(n,"b",function(){return i});var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v(e._s(e.$t("table.add")))])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:e.$t("table.photo"),align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.photo?a("img",{attrs:{width:"100%",src:e.setting.domain+t.row.photo}}):a("span",[e._v("-")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("table.title"),align:"center","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.title))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("table.integral"),align:"center","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.integral))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("table.campus"),align:"center","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.campus?a("span",[e._v(e._s(t.row.campus))]):a("span",[e._v("-")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("table.updatedAt"),align:"center","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.updatedAt))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("table.actions"),align:"center",width:"230","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(n){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.handleUpdate(n.row)}}},[e._v(e._s(e.$t("table.edit")))]),e._v(" "),a("el-popover",{attrs:{placement:"top",width:"160"},model:{value:n.row.del,callback:function(t){e.$set(n.row,"del",t)},expression:"scope.row.del"}},[a("p",[e._v(e._s(e.$t("table.del_tips")))]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){n.row.del=!1}}},[e._v(e._s(e.$t("table.cancel")))]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.handleDelete(n.row)}}},[e._v(e._s(e.$t("table.confirm")))])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(t){n.row.del=!0}},slot:"reference"},[e._v(e._s(e.$t("table.delete")))])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0<e.total,expression:"total>0"}],attrs:{"current-page":e.listQuery.page,"page-size":e.listQuery.limit,total:e.total,background:"",layout:"total, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"60%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"80%","margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:e.$t("table.photo"),prop:"photo"}},[a("Upload",{attrs:{value:e.temp.photo},on:{value:e.updateValue},model:{value:e.image,callback:function(t){e.image=t},expression:"image"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("table.title"),prop:"title"}},[a("el-input",{model:{value:e.temp.title,callback:function(t){e.$set(e.temp,"title",t)},expression:"temp.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("table.integral"),prop:"integral"}},[a("el-input",{attrs:{type:"number"},model:{value:e.temp.integral,callback:function(t){e.$set(e.temp,"integral",t)},expression:"temp.integral"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("table.campus"),prop:"campusId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.temp.campusId,callback:function(t){e.$set(e.temp,"campusId",t)},expression:"temp.campusId"}},e._l(e.campus,function(t,n){return a("el-option",{key:n,attrs:{label:t.label,value:t.value}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(e._s(e.$t("table.cancel")))]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v(e._s(e.$t("table.confirm")))])],1)],1)],1)},i=[]},427:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e(677),i=e(1044),s=e(4);var o=function(t){e(1041)},r=Object(s.a)(a.a,i.a,i.b,!1,o,null,null);n.default=r.exports},441:function(t,n,e){"use strict";var a=e(85),i=e.n(a);n.a={name:"singleImageUpload2",props:{value:String},computed:{imageUrl:function(){return this.value}},data:function(){return{tempUrl:""}},methods:{rmImage:function(){this.emitInput(""),this.emitValue("")},emitInput:function(t){this.$emit("input",t)},emitValue:function(t){this.$emit("value",t)},handleImageScucess:function(t,n,e){this.tempUrl=n.url,this.emitInput(this.tempUrl),this.emitValue(t.file)},myUpload:function(n){var t=new XMLHttpRequest,e=n.file;t.upload&&(t.upload.onprogress=function(t){0<t.total&&(t.percent=t.loaded/t.total*100),n.onProgress(t)});var a=new FormData;n.data&&i()(n.data).map(function(t){a.append(t,n.data[t])}),a.append(n.filename,n.file),t.onerror=function(t){n.onError(t)},t.onload=function(){if(t.status<200||300<=t.status)return n.onError(function(t,n,e){var a;a=e.response?e.status+(e.response.error||e.response):e.responseText?e.status+e.responseText:"fail to post "+t+e.status;var i=new Error(a);return i.status=e.status,i.method="post",i.url=t,i}(action,0,t));n.onSuccess(function(t){var n=t.responseText||t.response;if(!n)return n;try{var e=JSON.parse(n);return e.data}catch(t){return n}}(t))},t.open("post",n.action,!0),n.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0),t.setRequestHeader("X-File-Name",encodeURIComponent(e.name)),t.setRequestHeader("X-File-Size",e.size),t.send(e)}}}},443:function(t,n,e){"use strict";var a=e(444),i=function(t){Vue.directive("waves",a.a)};window.Vue&&(window.waves=a.a,Vue.use(i)),a.a.install=i,n.a=a.a},444:function(t,n,e){"use strict";var a=e(84),l=e.n(a),i=e(445);e.n(i);n.a={bind:function(o,r){o.addEventListener("click",function(t){var n=l()({},r.value),e=l()({ele:o,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),a=e.ele;if(a){a.style.position="relative",a.style.overflow="hidden";var i=a.getBoundingClientRect(),s=a.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":((s=document.createElement("span")).className="waves-ripple",s.style.height=s.style.width=Math.max(i.width,i.height)+"px",a.appendChild(s)),e.type){case"center":s.style.top=i.height/2-s.offsetHeight/2+"px",s.style.left=i.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(t.pageY-i.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(t.pageX-i.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=e.color,!(s.className="waves-ripple z-active")}},!1)}}},445:function(t,n,e){var a=e(446);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,e(24).default)("0b24217a",a,!0,{})},446:function(t,n,e){(t.exports=e(19)(!1)).push([t.i,".waves-ripple {\n    position: absolute;\n    border-radius: 100%;\n    background-color: rgba(0, 0, 0, 0.15);\n    background-clip: padding-box;\n    pointer-events: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    -webkit-transform: scale(0);\n    -ms-transform: scale(0);\n    transform: scale(0);\n    opacity: 1;\n}\n\n.waves-ripple.z-active {\n    opacity: 0;\n    -webkit-transform: scale(2);\n    -ms-transform: scale(2);\n    transform: scale(2);\n    -webkit-transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out, -webkit-transform 0.6s ease-out;\n}",""])},452:function(t,n,e){"use strict";var a=e(441),i=e(455),s=e(4);var o=function(t){e(453)},r=Object(s.a)(a.a,i.a,i.b,!1,o,"data-v-bbbde68e",null);n.a=r.exports},453:function(t,n,e){var a=e(454);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,e(24).default)("866e6b4a",a,!0,{})},454:function(t,n,e){(t.exports=e(19)(!1)).push([t.i,"\n.upload-container[data-v-bbbde68e] {\n  width: 50%;\n  height: 100%;\n  position: relative;\n}\n.upload-container .image-uploader[data-v-bbbde68e] {\n    height: 100%;\n}\n.upload-container .image-preview[data-v-bbbde68e] {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0px;\n    top: 0px;\n    border: 1px dashed #d9d9d9;\n}\n.upload-container .image-preview .image-preview-wrapper[data-v-bbbde68e] {\n      position: relative;\n      width: 100%;\n      height: 100%;\n}\n.upload-container .image-preview .image-preview-wrapper img[data-v-bbbde68e] {\n        width: 100%;\n        height: 100%;\n}\n.upload-container .image-preview .image-preview-action[data-v-bbbde68e] {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      left: 0;\n      top: 0;\n      cursor: default;\n      text-align: center;\n      color: #fff;\n      opacity: 0;\n      font-size: 20px;\n      background-color: rgba(0, 0, 0, 0.5);\n      transition: opacity 0.3s;\n      cursor: pointer;\n      text-align: center;\n      line-height: 200px;\n}\n.upload-container .image-preview .image-preview-action .el-icon-delete[data-v-bbbde68e] {\n        font-size: 36px;\n}\n.upload-container .image-preview:hover .image-preview-action[data-v-bbbde68e] {\n      opacity: 1;\n}\n",""])},455:function(t,n,e){"use strict";e.d(n,"a",function(){return a}),e.d(n,"b",function(){return i});var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"singleImageUpload2 upload-container"},[e("el-upload",{staticClass:"image-uploader",attrs:{drag:"",multiple:!1,"show-file-list":!1,action:"/v1/upload/image","on-success":t.handleImageScucess,"http-request":t.myUpload}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("Drag或"),e("em",[t._v("点击上传")])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:0<t.imageUrl.length,expression:"imageUrl.length>0"}],staticClass:"image-preview"},[e("div",{directives:[{name:"show",rawName:"v-show",value:1<t.imageUrl.length,expression:"imageUrl.length>1"}],staticClass:"image-preview-wrapper"},[e("img",{attrs:{src:t.imageUrl}}),t._v(" "),e("div",{staticClass:"image-preview-action"},[e("i",{staticClass:"el-icon-delete",on:{click:t.rmImage}})])])])],1)},i=[]},473:function(t,n,e){"use strict";n.c=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return a.a.get("/v1/campus/list",t)},n.a=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return a.a.post("/v1/campus/create",t)},n.e=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return a.a.post("/v1/campus/update",t)},n.b=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return a.a.post("/v1/campus/delete",t)},n.d=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return a.a.get("/v1/campus/items",t)};var a=e(30)},677:function(t,n,e){"use strict";var a=e(49),u=e.n(a),i=e(84),s=e.n(i),o=e(20),r=e.n(o),l=e(443),c=e(452),p=e(1043),d=e(473),m=e(48);n.a={name:"Prize",directives:{waves:l.a},components:{Upload:c.a},data:function(){return{tableKey:0,list:null,total:0,listLoading:!1,campus:[],listQuery:{page:1,limit:20,sortOrder:"ascend",filters:{}},sortOptions:[{label:"ID Ascending",key:"ascend"},{label:"ID Descending",key:"descend"}],image:"",temp:{photo:"",title:"",integral:0,campusId:""},dialogFormVisible:!1,dialogStatus:"",textMap:{update:this.$t("table.edit"),create:this.$t("table.add")},rules:{title:[{required:!0,message:this.$t("table.required"),trigger:"change"}],campusId:[{required:!0,message:this.$t("table.required"),trigger:"change"}]}}},created:function(){this.getList(),this.getCampus()},computed:r()({},Object(m.b)(["setting"])),methods:{getList:function(){var n=this;this.listLoading=!0,Object(p.c)(this.listQuery).then(function(t){n.list=t.data.items,n.total=t.data.pagination.total,n.listLoading=!1})},getCampus:function(){var n=this;Object(d.d)().then(function(t){n.campus=t.data})},updateValue:function(t){this.temp.photo=t},resetTemp:function(){this.temp={photo:"",title:"",integral:0}},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})},createData:function(){var e=this;this.$refs.dataForm.validate(function(t){t&&Object(p.a)(e.temp).then(function(t){if(100==t.code){var n=t.data;e.showErrorMessage(n)}else e.list.unshift(t.data),e.total=e.total+1,e.dialogFormVisible=!1,e.$notify({title:e.$t("table.success"),message:e.$t("table.create_success_tips"),type:"success",duration:2e3})})})},handleUpdate:function(t){var n=this;this.temp=s()({},t),this.image=this.setting.domain+t.photo,this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){n.$refs.dataForm.clearValidate()})},updateData:function(){var c=this;this.$refs.dataForm.validate(function(t){if(t){var n=s()({},c.temp);Object(p.d)(n).then(function(t){if(100==t.code){var n=t.data;c.showErrorMessage(n)}else{var e=!0,a=!1,i=void 0;try{for(var s,o=u()(c.list);!(e=(s=o.next()).done);e=!0){var r=s.value;if(r.id===c.temp.id){var l=c.list.indexOf(r);c.temp.campus=t.data.campus,c.list.splice(l,1,c.temp);break}}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}c.dialogFormVisible=!1,c.$notify({title:c.$t("table.success"),message:c.$t("table.update_success_tips"),type:"success",duration:2e3})}})}})},handleDelete:function(n){var e=this;this.$notify({title:this.$t("table.success"),message:this.$t("table.delete_success_tips"),type:"success",duration:2e3}),Object(p.b)({id:n.id}).then(function(){var t=e.list.indexOf(n);e.list.splice(t,1),e.total=e.total-1})},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},showErrorMessage:function(t){var n=this,e=[];t.map(function(t){e.push(n.$t(t))}),this.$message({message:e.join("，"),type:"error"})}}}}});